<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Loomora — Home</title>
  <link rel="stylesheet" href="css/style.css"/>
  <script src="js/api.js" defer></script>
  <script src="js/auth.js" defer></script>
  <script src="js/products.js" defer></script>
</head>
<body>
<header class="nav">
  <div class="nav-left">
    <img src="images/logo.png" alt="Loomora" class="logo"/>
    <a href="index.html" class="brand">Loomora</a>
  </div>
  <nav class="nav-links">
    <a href="shop.html">Shop</a>
    <a href="cart.html">Cart (<span id="nav-cart-count">0</span>)</a>
    <span id="nav-auth">
      <a href="login.html">Login</a> / <a href="register.html">Signup</a>
    </span>
  </nav>
</header>

<section class="hero">
  <div class="hero-inner">
    <h1>Elegant Embroidered Fabrics</h1>
    <p>Handcrafted cushions, curtains & home linen in premium weaves.</p>
    <a class="btn" href="shop.html">Shop Now</a>
  </div>
</section>

<section class="container">
  <h2>Featured Products</h2>
  <div id="featured-list" class="grid"></div>
</section>

<footer class="footer">
  <p>© <span id="year"></span> Loomora • Crafted with care</p>
</footer>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

// Load few featured products
window.addEventListener('DOMContentLoaded', async () => {
  updateNavAuth();
  updateCartCount();

  const products = await apiGet('/products'); // ✅ no /api needed now
  const list = document.getElementById('featured-list');

  (products || []).slice(0, 6).forEach(p =>
    list.insertAdjacentHTML('beforeend', productCardHTML(p))
  );
});
</script>

</body>
</html>
